version: 2
type: decoder
name: com.hardwario.chester.app.current
schema:
  - message:
    - version:
    - sequence:
    - timestamp:
  - attribute:
    - vendor_name:
    - product_name:
    - hw_variant:
    - hw_revision:
    - fw_version:
    - serial_number:
  - system:
    - uptime:
    - voltage_load:
      - $div: 1000
      - $fpp: 2
    - voltage_rest:
      - $div: 1000
      - $fpp: 2
    - current_load:
  - network:
    - imei:
    - imsi:
  - thermometer:
    - temperature:
      - $div: 100
      - $fpp: 2
  - accelerometer:
    - accel_x:
      - $div: 1000
      - $fpp: 2
    - accel_y:
      - $div: 1000
      - $fpp: 2
    - accel_z:
      - $div: 1000
      - $fpp: 2
    - orientation:
  - backup:
    - line_voltage:
    - batt_voltage:
    - state:
      - $enum:
        - "disconnected"
        - "connected"
    - events:
      - $key: "events"
      - $tso:
        - type:
          - $enum:
            - "disconnected"
            - "connected"
  - analog_channels:
    - channel:
    - measurements_div:
        - $key: "measurements"
        - $tsp:
            - mean_min:
              - $div: 100
              - $fpp: 2
            - mean_max:
              - $div: 100
              - $fpp: 2            
            - mean_avg:
              - $div: 100
              - $fpp: 2            
            - mean_mdn:
              - $div: 100
              - $fpp: 2            
            - rms_min:
              - $div: 100
              - $fpp: 2            
            - rms_max:
              - $div: 100
              - $fpp: 2            
            - rms_avg:
              - $div: 100
              - $fpp: 2            
            - rms_mdn:
              - $div: 100
              - $fpp: 2            
  - w1_thermometers:
    - serial_number:
    - measurements_div:
      - $key: "measurements"
      - $tsp:
        - min:
          - $div: 100
          - $fpp: 2
        - max:
          - $div: 100
          - $fpp: 2
        - avg:
          - $div: 100
          - $fpp: 2
        - mdn:
          - $div: 100
          - $fpp: 2
  - ble_tags:
    - addr:
    - rssi:
    - voltage:
      - $div: 100
      - $fpp: 2
    - temperature:
      - measurements:
        - $tsp:
          - min:
            - $div: 100
            - $fpp: 2
          - max:
            - $div: 100
            - $fpp: 2
          - avg:
            - $div: 100
            - $fpp: 2
          - mdn:
            - $div: 100
            - $fpp: 2
    - humidity:
      - measurements:
        - $tsp:
          - min:
            - $div: 100
            - $fpp: 2
          - max:
            - $div: 100
            - $fpp: 2
          - avg:
            - $div: 100
            - $fpp: 2
          - mdn:
            - $div: 100
            - $fpp: 2